<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M3U8 Player Pro</title>
  <style>
    body, html { margin:0; padding:0; height:100%; background:#000; font-family:Arial; }
    #player-container { position:relative; width:100%; height:100%; }
    video { width:100%; height:100%; background:#000; }
    #controls {
      position:absolute; bottom:20px; left:20px;
      display:flex; gap:10px; z-index:20;
    }
    button {
      padding:8px 12px;
      background:#ffffff40; border:1px solid #fff5; color:white;
      border-radius:6px; cursor:pointer;
      backdrop-filter:blur(4px);
    }
    button:hover { background:#ffffff70; }

    #server-menu {
      position:absolute; top:20px; right:20px;
      background:#0008; color:white; padding:10px;
      border-radius:8px; display:none; flex-direction:column;
      gap:6px; z-index:30;
    }
    #server-menu button { width:150px; text-align:left; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>

<body>

<div id="player-container">
  <video id="video" controls crossorigin="anonymous"></video>

  <!-- NÃºt Ä‘iá»u khiá»ƒn -->
  <div id="controls">
    <button id="back10">â® -10s</button>
    <button id="forward10">â­ +10s</button>
    <button id="serverBtn">ğŸŒ Server</button>
    <button id="subBtn">ğŸ“ Sub (.vtt)</button>
  </div>

  <!-- Menu chá»n server -->
  <div id="server-menu"></div>
</div>

<script>
  const video = document.getElementById("video");
  let hls;

  // ========= Láº¤Y URL HIá»†N Táº I =========
  const urlParams = new URLSearchParams(window.location.search);
  const defaultSrc = urlParams.get("url");

  // ========= DANH SÃCH SERVER =========
  // ğŸ‘‰ Báº¡n chá»‰nh sá»­a danh sÃ¡ch á»Ÿ Ä‘Ã¢y
  const servers = [
    { name: "Server 1", url: defaultSrc },
    { name: "Server 2", url: "https://example.com/ALT1.m3u8" },
    { name: "Server 3", url: "https://example.com/ALT2.m3u8" }
  ];

  // ========= Náº P VIDEO =========
  function loadVideo(src) {
    if (hls) hls.destroy();
    if (Hls.isSupported()) {
      hls = new Hls();
      hls.loadSource(src);
      hls.attachMedia(video);
    } else {
      video.src = src;
    }
  }

  loadVideo(defaultSrc);

  // ========= NÃšT TUA 10 GIÃ‚Y =========
  document.getElementById("back10").onclick = () => video.currentTime -= 10;
  document.getElementById("forward10").onclick = () => video.currentTime += 10;

  // ========= MENU SERVER =========
  const serverBtn = document.getElementById("serverBtn");
  const menu = document.getElementById("server-menu");

  serverBtn.onclick = () => {
    menu.style.display = menu.style.display === "flex" ? "none" : "flex";
  };

  servers.forEach(s => {
    let btn = document.createElement("button");
    btn.textContent = s.name;
    btn.onclick = () => {
      loadVideo(s.url);
      menu.style.display = "none";
    };
    menu.appendChild(btn);
  });

  // ========= Táº¢I SUB Rá»œI =========
  document.getElementById("subBtn").onclick = async () => {
    let subUrl = prompt("Nháº­p link file .vtt:");
    if (!subUrl) return;

    let track = document.createElement("track");
    track.kind = "subtitles";
    track.label = "Vietnamese";
    track.srclang = "vi";
    track.src = subUrl;
    track.default = true;

    video.appendChild(track);

    alert("ÄÃ£ thÃªm sub!");
  };
</script>

</body>
</html>
